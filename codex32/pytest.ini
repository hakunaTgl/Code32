[pytest]
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
addopts = -v --strict-markers --tb=short
filterwarnings =
    # Python 3.14+ deprecations emitted by upstream deps. These aren't actionable
    # in this repo while we remain on FastAPI 0.104 + Pydantic v1 for 3.14.
    ignore:ForwardRef\._evaluate is a private API.*:DeprecationWarning
    ignore:'asyncio\.iscoroutinefunction' is deprecated.*:DeprecationWarning
    ignore:'asyncio\.get_event_loop_policy' is deprecated.*:DeprecationWarning
    ignore:on_event is deprecated, use lifespan event handlers instead\.:DeprecationWarning
    # ResourceWarning can be noisy under CPython 3.14 when subprocess handles are
    # GC'd at interpreter shutdown before being explicitly waited.
    ignore:subprocess .* is still running:ResourceWarning
markers =
    asyncio: marks tests as async (deselect with '-m "not asyncio"')
    integration: marks tests as integration tests
    slow: marks tests as slow (deselect with '-m "not slow"')
asyncio_mode = auto
